<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Coach Homepage</title>
    <!-- Link to custom CSS -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='coach_homepage.css') }}"
    />
  </head>
  <body>
    <div class="coach-container">
      <!-- Flash Messages -->
      {% with messages = get_flashed_messages(with_categories=true) %} {% if
      messages %} {% for category, message in messages %}
      <div class="flash-message alert-{{ category }}">
        <span class="message-text">{{ message }}</span>
        <span
          class="close-btn"
          onclick="this.parentElement.style.display='none';"
          >&times;</span
        >
      </div>
      {% endfor %} {% endif %} {% endwith %}

      <!-- Welcome Section -->
      <h1 class="title">Welcome, Coach {{ forename }}!</h1>
      <p class="subtitle">This is the Coach Dashboard.</p>

      <!-- Action Buttons -->
      <div class="action-buttons">
        <a href="{{ url_for('create_lesson') }}" class="btn-primary"
          >Create Lesson</a
        >
        <a
          href="{{ url_for('create_one_to_one_training') }}"
          class="btn-success"
          >Create One-to-One Training</a
        >
      </div>

      <!-- Lessons Table -->
      <h2 class="section-title">Your Lessons</h2>
      <div class="table-container">
        <table class="coach-table">
          <thead>
            <tr>
              <th>Description</th>
              <th>Date</th>
              <th>Start Time</th>
              <th>End Time</th>
              <th>Pool ID</th>
              <th>Lane Number</th>
              <th>Session Type</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for lesson in lessons %}
            <tr>
              <td>{{ lesson.description }}</td>
              <td>{{ lesson.date }}</td>
              <td>{{ lesson.start_time }}</td>
              <td>{{ lesson.end_time }}</td>
              <td>{{ lesson.pool_id }}</td>
              <td>{{ lesson.lane_no }}</td>
              <td>
                {% if lesson.session_type == "WomenOnly" %} Women Only {% elif
                lesson.session_type == "MenOnly" %} Men Only {% elif
                lesson.session_type == "Mixed" %} Mixed {% else %} Unknown {%
                endif %}
              </td>
              <td>
                <div class="action-buttons-container">
                  <a
                    href="{{ url_for('edit_lesson', lesson_id=lesson.session_id) }}"
                    class="btn-warning"
                    >Edit</a
                  >
                  <form
                    action="{{ url_for('delete_lesson', lesson_id=lesson.session_id) }}"
                    method="POST"
                    class="inline-form"
                  >
                    <button
                      type="submit"
                      class="btn-danger"
                      onclick="return confirm('Are you sure you want to delete this lesson?');"
                    >
                      Delete
                    </button>
                  </form>
                </div>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>

      <!-- One-to-One Trainings Table -->
      <h2 class="section-title">Your One-to-One Trainings</h2>
      <div class="table-container">
        <table class="coach-table">
          <thead>
            <tr>
              <th>Description</th>
              <th>Date</th>
              <th>Start Time</th>
              <th>End Time</th>
              <th>Pool ID</th>
              <th>Lane Number</th>
              <th>Swimming Style</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for training in one_to_one_trainings %}
            <tr>
              <td>{{ training.description }}</td>
              <td>{{ training.date }}</td>
              <td>{{ training.start_time }}</td>
              <td>{{ training.end_time }}</td>
              <td>{{ training.pool_id }}</td>
              <td>{{ training.lane_no }}</td>
              <td>{{ training.swimming_style }}</td>
              <td>
                <div class="action-buttons-container">
                  <a
                    href="{{ url_for('edit_one_to_one_training', training_id=training.session_id) }}"
                    class="btn-warning"
                    >Edit</a
                  >
                  <form
                    action="{{ url_for('delete_one_to_one_training', training_id=training.session_id) }}"
                    method="POST"
                    class="inline-form"
                  >
                    <button
                      type="submit"
                      class="btn-danger"
                      onclick="return confirm('Are you sure you want to delete this training?');"
                    >
                      Delete
                    </button>
                  </form>
                </div>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>

      <!-- Logout Button -->
      <a href="{{ url_for('logout') }}" class="btn-secondary">Logout</a>
    </div>
  </body>
</html>
