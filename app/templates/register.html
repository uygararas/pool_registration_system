{% extends "base.html" %} {% block title %}Register{% endblock %} {% block
content %}
<!-- Link to the custom CSS -->
<link
  rel="stylesheet"
  href="{{ url_for('static', filename='register.css') }}"
/>

<div class="register-container mt-5">
  <h2 class="text-center mb-4">Create Your Account</h2>
  <form method="POST" action="{{ url_for('register') }}" class="register-form">
    <!-- User Information -->
    <div class="form-group">
      <label for="email" class="form-label">Email</label>
      <input
        type="email"
        class="form-control"
        name="email"
        placeholder="Enter your email"
        required
      />
    </div>
    <div class="form-group">
      <label for="password" class="form-label">Password</label>
      <input
        type="password"
        class="form-control"
        name="password"
        placeholder="Enter your password"
        required
      />
    </div>
    <div class="form-group">
      <label for="forename" class="form-label">Forename</label>
      <input
        type="text"
        class="form-control"
        name="forename"
        placeholder="Enter your forename"
        required
      />
    </div>
    <div class="form-group">
      <label for="surname" class="form-label">Surname</label>
      <input
        type="text"
        class="form-control"
        name="surname"
        placeholder="Enter your surname"
        required
      />
    </div>
    <div class="form-group">
      <label for="gender" class="form-label">Gender</label>
      <select class="form-control" name="gender" required>
        <option value="" disabled selected>Select your gender</option>
        <option>Male</option>
        <option>Female</option>
        <option>Other</option>
      </select>
    </div>
    <div class="form-group">
      <label for="birth_date" class="form-label">Birth Date</label>
      <input type="date" class="form-control" name="birth_date" required />
    </div>

    <!-- Role Selection -->
    <div class="form-group">
      <label for="role" class="form-label">Role</label>
      <select
        class="form-control"
        name="role"
        id="role"
        required
        onchange="showRoleFields()"
      >
        <option value="" disabled selected>Select your role</option>
        <option value="Employee">Employee</option>
        <option value="PoolAdmin">Pool Admin</option>
        <option value="Lifeguard">Lifeguard</option>
        <option value="Coach">Coach</option>
        <option value="Swimmer">Swimmer</option>
        <option value="Member">Member</option>
      </select>
    </div>

    <!-- Dynamic Fields Based on Role -->
    <div id="role-fields"></div>

    <button type="submit" class="btn btn-primary">Register</button>
  </form>
  <p class="text-center mt-3">
    Already have an account?
    <a href="{{ url_for('login') }}" class="text-link">Login here</a>.
  </p>
</div>

<!-- JavaScript for dynamic role fields -->
<script>
  function showRoleFields() {
    var role = document.getElementById("role").value;
    var roleFields = document.getElementById("role-fields");
    roleFields.innerHTML = ""; // Clear previous fields

    if (["Employee", "PoolAdmin", "Lifeguard", "Coach"].includes(role)) {
      roleFields.innerHTML += `
            <div class="form-group">
                <label for="salary" class="form-label">Salary</label>
                <input type="number" step="0.01" class="form-control" name="salary" required>
            </div>
            <div class="form-group">
                <label for="emp_date" class="form-label">Employment Date</label>
                <input type="date" class="form-control" name="emp_date" required>
            </div>
        `;
    }

    if (role === "PoolAdmin") {
      roleFields.innerHTML += `
            <div class="form-group">
                <label for="department" class="form-label">Department</label>
                <input type="text" class="form-control" name="department" required>
            </div>
        `;
    }

    if (role === "Lifeguard") {
      roleFields.innerHTML += `
            <div class="form-group">
                <label for="license_no" class="form-label">License Number</label>
                <input type="text" class="form-control" name="license_no" required>
            </div>
        `;
    }

    if (role === "Coach") {
      roleFields.innerHTML += `
            <div class="form-group">
                <label for="rank" class="form-label">Rank</label>
                <input type="text" class="form-control" name="rank" required>
            </div>
            <div class="form-group">
                <label for="specialization" class="form-label">Specialization</label>
                <input type="text" class="form-control" name="specialization">
            </div>
        `;
    }

    if (["Swimmer", "Member"].includes(role)) {
      roleFields.innerHTML += `
            <div class="form-group">
                <label for="swimming_level" class="form-label">Swimming Level</label>
                <input type="text" class="form-control" name="swimming_level" required>
            </div>
        `;
    }

    if (role === "Member") {
      roleFields.innerHTML += `
            <div class="form-group">
                <label for="free_training_remaining" class="form-label">Free Training Remaining</label>
                <input type="number" class="form-control" name="free_training_remaining" value="0" min="0">
            </div>
        `;
    }
  }
</script>
{% endblock %}
