<!-- templates/register.html -->
{% extends "base.html" %}

{% block title %}Register{% endblock %}

{% block content %}

<div class="text-center">
    <!-- Logo -->
    <img src="{{ url_for('static', filename='logo-2.png') }}" alt="Logo" style="width: 300px; height: auto;" class="mb-4">
</div>

<h2 class="mt-4">Register</h2>
<form method="POST" action="{{ url_for('register') }}">
    <!-- User Information -->
    <div class="form-group">
        <label for="email">Email:</label>
        <input type="email" class="form-control" name="email" required>
    </div>
    <div class="form-group">
        <label for="password">Password:</label>
        <input type="password" class="form-control" name="password" required>
    </div>
    <div class="form-group">
        <label for="forename">Forename:</label>
        <input type="text" class="form-control" name="forename" required>
    </div>
    <div class="form-group">
        <label for="surname">Surname:</label>
        <input type="text" class="form-control" name="surname" required>
    </div>
    <div class="form-group">
        <label for="gender">Gender:</label>
        <select class="form-control" name="gender" required>
            <option value="" disabled selected>Select your gender</option>
            <option>Male</option>
            <option>Female</option>
            <option>Other</option>
        </select>
    </div>
    <div class="form-group">
        <label for="birth_date">Birth Date:</label>
        <input type="date" class="form-control" name="birth_date" required>
    </div>

    <!-- Role Selection -->
    <div class="form-group">
        <label for="role">Role:</label>
        <select class="form-control" name="role" id="role" required onchange="showRoleFields()">
            <option value="" disabled selected>Select your role</option>
            <option value="Employee">Employee</option>
            <option value="PoolAdmin">Pool Admin</option>
            <option value="Lifeguard">Lifeguard</option>
            <option value="Coach">Coach</option>
            <option value="Swimmer">Swimmer</option>
            <option value="Member">Member</option>
        </select>
    </div>

    <!-- Dynamic Fields Based on Role -->
    <div id="role-fields"></div>

    <button type="submit" class="btn btn-primary">Register</button>
</form>
<br>
<p>Already have an account? <a href="{{ url_for('login') }}">Login here</a>.</p>

<!-- JavaScript for dynamic role fields -->
<script>
function showRoleFields() {
    var role = document.getElementById("role").value;
    var roleFields = document.getElementById("role-fields");
    roleFields.innerHTML = ""; // Clear previous fields

    if (role === "Employee" || role === "PoolAdmin" || role === "Lifeguard" || role === "Coach") {
        // Common fields for employees
        roleFields.innerHTML += `
            <div class="form-group">
                <label for="salary">Salary:</label>
                <input type="number" step="0.01" class="form-control" name="salary" required>
            </div>
            <div class="form-group">
                <label for="emp_date">Employment Date:</label>
                <input type="date" class="form-control" name="emp_date" required>
            </div>
        `;
    }

    if (role === "PoolAdmin") {
        roleFields.innerHTML += `
            <div class="form-group">
                <label for="department">Department:</label>
                <input type="text" class="form-control" name="department" required>
            </div>
        `;
    }

    if (role === "Lifeguard") {
        roleFields.innerHTML += `
            <div class="form-group">
                <label for="license_no">License Number:</label>
                <input type="text" class="form-control" name="license_no" required>
            </div>
        `;
    }

    if (role === "Coach") {
        roleFields.innerHTML += `
            <div class="form-group">
                <label for="rank">Rank:</label>
                <input type="text" class="form-control" name="rank" required>
            </div>
            <div class="form-group">
                <label for="specialization">Specialization:</label>
                <input type="text" class="form-control" name="specialization">
            </div>
        `;
    }

    if (role === "Swimmer" || role === "Member") {
        roleFields.innerHTML += `
            <div class="form-group">
                <label for="swimming_level">Swimming Level:</label>
                <input type="text" class="form-control" name="swimming_level" required>
            </div>
        `;
    }

    if (role === "Member") {
        roleFields.innerHTML += `
            <div class="form-group">
                <label for="free_training_remaining">Free Training Remaining:</label>
                <input type="number" class="form-control" name="free_training_remaining" value="0" min="0">
            </div>
        `;
    }
}
</script>
{% endblock %}
